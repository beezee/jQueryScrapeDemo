<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>jQueryScrape</title>
	<meta name="description" content="">
	<meta name="author" content="">
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="stylesheets/base.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="stylesheet" href="stylesheets/layout.css">
	<link rel="stylesheet" href="stylesheets/custom.css">

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	<link href='http://fonts.googleapis.com/css?family=Noticia+Text' rel='stylesheet' type='text/css'>

</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="sixteen columns">
			<h1 class="remove-bottom" style="margin-top: 40px">jQuery Scrape</h1>
			<h5>Version 0.1</h5>
			<hr />
		</div>
		<div class="two columns">
			&nbsp;
		</div>
		<div class="twelve columns">
			<h3>Light speed scraping and parsing with jQuery</h3>
			<p>jqueryScrape is a tiny script and PHP proxy that lets you scrape any viewable URL from jQuery, and gives you access
			to the scraped DOM as a jQuery object</p>
			<p>The columns below are pulled from their respective sites on $('document').ready(), and inserted into the dom to be formatted
			by local CSS. The demo took ~60 lines of jQuery to acheive, viewable in the source
			of this page.</p>
			<p>There is still further that the plugin can be optimized, so if you have the chops and interest, fork it on
			<a href="http://www.github.com/beezee/jqueryScrape">github</a>.</p>
		</div>
		<div class="two columns">
			&nbsp;
		</div>
	</div>
		<div id="scraped"></div>

	</div><!-- container -->



	<!-- JS
	================================================== -->
	<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script src="javascripts/tabs.js"></script>
	<script src="javascripts/jquery.scrape.js" type="text/javascript"></script>
	<script src="javascripts/jquery.tmpl.min.js" type="text/javascript"></script>
	<script id="title-template" type="text/x-jquery-tmpl">
		<h3>{{tmpl 'sectionTitle'}}</h3><a class="expand">More of these</a>
	</script>
	<script id="item-template" type="text/x-jquery-tmpl">
		<div class="one-third column item${hidden}">
			<img class="jqsdemo-feat-img" src="{{tmpl 'imgSrc'}}" />
			<h4 class="jqsdemo-item-title">{{tmpl 'itemTitle'}}</h4>
			<br /><br />
			{{tmpl 'itemText'}}
		</div>
	</script>
	<script type="text/javascript">
		jQuery('document').ready(function($) {
			$.jqueryScrape.setProxyUrl('http://brianzeligson.com/jqueryScrape/javascripts/jquery.scrape.proxy.php');
			var scraped = $('#scraped');
			var itemTemplate = $('#item-template');
			var titleTemplate = $('#title-template');
			$('body').bind('youtube', function(e, response) {
				var youTube = $.jqueryScrape.span2img(response, {prepend: 'http:'}, function() {
					var imgSrc = $(this).data('thumb');
					$('<img style="max-height:80px;max-width:80px;" src="'+imgSrc+'" />').insertBefore($(this));
				});
				var youtubediv = $('<div class="container expandable">');
				$.template('sectionTitle', 'Recent YouTube Uploads');
				titleTemplate.tmpl().appendTo(youtubediv);
				youTube.find('div.feed-page ul li').each(function(index) {
					var item = {};
					item.hidden = (index >= 3) ? ' hidden' : '';
					$.template('imgSrc', $(this).find('.clip img:first').attr('src'));
					var h4 = $(this).find('.feed-item-visual-description h4');
					h4a = h4.find('a');
					h4a.attr('href', 'http://www.youtube.com'+h4a.attr('href'));
					$.template('itemTitle', h4.html());
					$.template('itemText', $(this).find('.description').html());
					itemTemplate.tmpl(item).appendTo(youtubediv);
					youtubediv.appendTo(scraped);
				});
			});
			$('body').bind('buzzfeed', function(e, response) {				
				var buzzfeed = $.jqueryScrape.span2img(response, {filter : '.thumb.bf_dom', imgClass : 'thumb'}, function() {
						var imgSrc = $(this).attr('src');
						if (imgSrc.substr(-9) == 'trans.gif') imgSrc = 'http://s3-ak.buzzfeed.com/' + $(this).attr('rel:bf_image_src');
						$('<img class="jqsThumb" src="'+imgSrc+'" />').insertBefore($(this));
				});
				var count = 0;
				var buzzfeeddiv = $('<div class="container expandable">');
				buzzfeed.find('.std-posts li').each(function() {
					var div = $('<div class="one-third column item">');
					if (count >= 3) div.addClass('hidden');
					var img = $(this).find('.thumb-unit img.jqsThumb');
					img.addClass('jqsdemo-feat-img');
					var h2 = $(this).find('h2');
					var h2a = h2.find('a');
					h2.addClass('jqsdemo-item-title');
					h2a.attr('href', 'http://www.buzzfeed.com'+h2a.attr('href'));
					var desc = $(this).find('.description');
					div.append(img).append(h2).append('<br /><br />').append(desc);
					if (div.text() != '') { div.appendTo(buzzfeeddiv); count++ }
				})
				$('<h3>Recent BuzzFeed Posts</h3><hr />').prependTo(buzzfeeddiv);
				buzzfeeddiv.appendTo(scraped);
			})
			var nytdiv = $('<div class="container expandable">');
			$('body').bind('nyt', function(e, response) {
				var nyT = $.jqueryScrape.span2img(response);
				nyT.find('.story').each(function(index) {
					var div = $('<div class="one-third column item">');
					if (index >= 3) div.addClass('hidden');
					var img = $(this).find('img');
					img.addClass('jqsdemo-feat-img');
					var h3 = $(this).find('h3');
					h3.addClass('jqsdemo-item-title');
					var summary = $(this).find('.summary');
					div.append(img).append( h3).append('<br /><br />').append(summary);
					if (div.text() != '') $(nytdiv).append(div);
				})
				$('<h3>Recent NYT Tech News</h3><hr />').prependTo(nytdiv);
				nytdiv.appendTo(scraped);
			});
			$.jqueryScrape.getResult('http://youtube.com', 'youtube');
			$.jqueryScrape.getResult('http://buzzfeed.com', 'buzzfeed');
			$.jqueryScrape.getResult('http://www.nytimes.com/pages/technology/index.html', 'nyt');
		});
	</script>

<!-- End Document
================================================== -->
</body>
</html>